:root .guide-root, .guide-root{
  --bg:#030d1640; --ink:#e7f1ee; --muted:#9bb0ac;
  --card:#0f1b25; --card-2:#0b1419; --border:rgba(255,255,255,0.04);
  --pill:rgba(255,255,255,0.03); --accent:#6ee7b7; --gold:#f5c06a;
  --glass:rgba(255,255,255,0.03); --shadow: 0 8px 30px rgba(3,7,10,0.6);
  background: linear-gradient(180deg,var(--bg) 0%, #2d2e2e88 60%);
  color: var(--ink);
}
*{box-sizing:border-box}
body{margin:0;}
.guide-wrap{ color:var(--ink); }
.guide-wrap p, .guide-wrap li, .guide-wrap .crumbs, .guide-wrap .kpi, .guide-wrap .chip, .guide-wrap .author-meta, .guide-wrap .author-name { color:var(--ink); }
.guide-wrap h1{ font-family: 'Playfair Display', serif; font-size:44px; margin:6px 0 18px; background:linear-gradient(90deg,var(--gold),var(--gold)); -webkit-background-clip:text; background-clip:text; color:transparent; }
.guide-wrap h2{ margin:28px 0 12px; font-size:26px; color:var(--ink); position:relative }
.guide-wrap h2:after{ content:''; display:block; height:6px; width:64px; margin-top:8px; border-radius:999px; background:linear-gradient(90deg,var(--gold),var(--accent)); }
.guide-wrap article{ background:transparent; }

/* Hero */
.hero{ padding-top:22px; }
.hero-excerpt{font-size:15px;color:#fff;margin-bottom:-5px}  
.hero-inner{max-width:1120px;margin:0 auto;padding:22px 20px; display:flex;flex-direction:column}
.hero-graphic{max-width:1120px;margin:8px auto 0;padding:0 20px;display:flex;justify-content:flex-start;position:relative}
.hero-graphic > img{width:100%;max-width:640px;height:auto;opacity:0.98;filter:drop-shadow(0 24px 40px rgba(3,7,10,0.6));display:block; margin-top: 60px;}
@media (max-width:900px){ .hero-graphic > img{width:60%;max-width:320px} }
.crumbs{color:var(--muted);font-size:13px;margin-bottom:8px}
.crumbs a{color:#fff;text-decoration:none}
.hero h1{font-family: 'Playfair Display', serif; font-size:44px; margin:6px 0 18px; 
  background:linear-gradient(90deg,var(--gold),var(--gold)); -webkit-background-clip:text;background-clip:text;color:transparent}
.hero .meta{display:flex;gap:12px;align-items:center;flex-wrap:wrap;color:var(--muted);font-size:13px}
.kpi{display:inline-flex;align-items:center;gap:8px;background:var(--pill);border-radius:999px;padding:6px 12px;border:1px solid var(--border);font-weight:600}
.share{margin-left:auto;display:flex;gap:38px}
.share a{width:32px;height:32px;border-radius:8px;display:grid;place-items:center;background:transparent;border:1px solid var(--border);color:var(--ink);text-decoration:none}
.share .share-meta{display:flex;flex-direction:column;font-size:12px;color:var(--muted);margin-right:8px;text-align:right}
.share .lastUpdated{display:block}
.share .share-icons{display:flex;gap:8px}
/* Track 3 KPI bar (portable) */
.kpi-bar{display:flex;flex-wrap:wrap;gap:10px;margin:12px 0 18px}
.kpi-pill{
  flex:1 1 280px;
  display:flex;flex-direction:column;gap:4px;
  padding:12px 14px;border-radius:12px;
  border:1px solid var(--border, #1e222a);
  background:linear-gradient(180deg, rgba(41,246,161,.08), rgba(44,229,97,.04));
  box-shadow:0 2px 16px rgba(0,0,0,.18);
}
.kpi-pill strong{color:var(--accent, #2ce561);font-size:14px}
.kpi-pill .sub{font-size:13px;color:var(--muted, #9aa7a7)}
/* Unified avatar sizing: use a square avatar for consistent cropping and layout */
.author-box img, .author-avatar{
  width:88px;
  height:88px;
  object-fit:cover;
  aspect-ratio: 1 / 1;
  border-radius:12px;
  border:1px solid rgba(255,255,255,0.04);
  box-shadow:0 8px 28px rgba(3,7,10,0.45);
  flex-shrink:0;
  display:block;
}

/* Desktop: align hero left (crumbs + h1) and meta on one row; keep Last updated inline with H1 */
@media (min-width:900px){
  .hero-inner{flex-direction:row;align-items:baseline;justify-content:space-between}
  .hero-left{display:flex;flex-direction:column}
  .hero-left .crumbs{margin-bottom:6px}
  .hero .meta{align-items:baseline}
  /* stack Last updated and icons vertically on desktop, icons below the text */
  .share{display:flex;flex-direction:column;align-items:flex-end}
  .share .lastUpdated{font-size:13px;line-height:1;margin-bottom:6px}
  .share .share-icons{margin-top:0;display:flex;gap:8px}
}

/* Layout */
.wrap{max-width:1120px;padding:0 20px}
/* Scope guide-specific grid rules to avoid colliding with global .grid classes elsewhere */
.guide-wrap .grid{display:grid;grid-template-columns:minmax(0,1fr) 320px !important;gap:32px !important;align-items:start}
@media (max-width:1060px){
  .guide-wrap .grid{grid-template-columns:1fr !important}
}
/* hide the TOC only on narrower screens to keep scrollspy working on larger tablets/desktops */
@media (max-width:900px){
  .toc{display:none}
}

/* Definition + article shell */
/* Give each surface a slightly different tint/contrast so cards don't all look identical */
.definition{background:linear-gradient(180deg, rgba(255,255,255,0.045), rgba(255,255,255,0.01)); border:1px solid rgba(255,255,255,0.06); border-radius:12px;padding:14px 16px;margin:1px 0 0 -18px;font-size: 18px;}
.definition h3{margin:0 0 8px;font-size:18px;letter-spacing:.12em;color:var(--muted)}
.definition p{margin:0;color:var(--ink);font-weight:600}

/* article gets a subtle green-tinted sheen to separate it from small cards */
article{padding-top:0px;}
article p:first-of-type{font-size:16px;color:#ffffff; font-weight: 400;}
h2{margin:28px 0 12px;font-size:26px;color:var(--ink);position:relative}
h2:after{display:block;height:6px;width:64px;margin-top:8px;border-radius:999px;background:linear-gradient(90deg,var(--gold),var(--accent))}

/* Strongly scope article H2 rules so broad site CSS (eg. advertise.css .section h2)
  cannot override the guide's intended heading appearance. This selector is
  more specific and appears after global h2 rules. */
.wrap article h2{font-size:26px;color:var(--ink);position:relative}
.wrap article h2:after{content:'';display:block;height:6px;width:64px;margin-top:8px;border-radius:999px;text-align:center;background:linear-gradient(90deg,var(--gold),var(--accent))}
h3{margin:18px 0 8px;font-size:18px;color:#44f798 !important;}
p{margin:12px 0;color:#fff}
.divider{height:1px;background:var(--border);margin:22px 0}

.toc{ /* Slightly darker panel so the sidebar reads as a distinct surface */
  position: -webkit-sticky;
  position: sticky;
  top: 24px;
  z-index: 60;
  background: linear-gradient(180deg, rgba(0,0,0,0.06), rgba(255,255,255,0.004));
  border: 1px solid rgba(255,255,255,0.03);
  border-radius: 12px;
  padding: 16px;
  box-shadow: var(--shadow);
}
.toc h4{margin:0 0 10px;font-size:14px;color:var(--muted)}
.toc h4:after{content:'';display:block;height:4px;width:56px;margin-top:8px;border-radius:999px;background:linear-gradient(90deg,var(--gold),var(--accent))}
.toc ol{margin:0;padding-left:16px}
.toc a{color:var(--ink);text-decoration:none;display:inline-block;padding:4px 0}
.toc a:hover{color:var(--accent)}
.toc a.active{color:var(--accent);font-weight:700}
/* Fixed fallback: when CSS sticky can't work because of ancestor overflow/transform,
  the script below will add .fixed to the .toc and inline-position it. */
.toc.fixed{position:fixed;z-index:1000;box-shadow:var(--shadow);pointer-events:auto}
/* custom scrollbar for the fixed TOC */
.toc.fixed::-webkit-scrollbar{width:10px;height:10px}
.toc.fixed::-webkit-scrollbar-track{background:transparent;border-radius:999px}
.toc.fixed::-webkit-scrollbar-thumb{background:rgba(110,231,183,0.22);border-radius:999px;border:2px solid rgba(0,0,0,0)}
.toc.fixed::-webkit-scrollbar-thumb:hover{background:rgba(110,231,183,0.34)}
/* Firefox */
.toc.fixed{scrollbar-width:thin;scrollbar-color: rgba(110,231,183,0.22) transparent}

/* Callouts / tables */
.callout{border-left:4px solid var(--accent);background:linear-gradient(180deg, rgba(110,231,183,0.03), rgba(255,255,255,0.01));padding:14px 16px;border-radius:8px;color:#e6f8ee}
.table{overflow:auto;margin:12px 0} table{width:100%;border-collapse:collapse}
th,td{border:1px solid rgba(255,255,255,0.04);padding:12px 14px;text-align:left}
tbody tr:nth-child(odd){background:rgba(255,255,255,0.01)}
code{background:#071821;border:1px solid rgba(255,255,255,0.03);border-radius:6px;padding:4px 8px;font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, 'Roboto Mono', monospace}

/* Lists + callouts */
ol, ul{margin:14px 0 14px 20px;color:var(--muted)}
li{margin:8px 0 }

/* Related / chips */
/* related card uses a mid-contrast surface between definition and article */
.related{margin-top:32px}
/* left accent bars for surfaces */
.definition{border-left:4px solid rgba(110,231,183,0.10)}

.toc{border-left:4px solid rgba(110,231,183,0.06)}


/* KPI pills and share buttons get subtle accent highlights */
.kpi{background:linear-gradient(90deg, rgba(110,231,183,0.04), rgba(245,192,106,0.03));border:1px solid rgba(255,255,255,0.04)}
.share a:hover{border-color:var(--accent);color:var(--accent)}
.chips{display:flex;flex-wrap:wrap;gap:10px;}
.chip{display:inline-block;padding:8px 12px;margin-right: 12px;border-radius:999px;background:transparent;margin-left: -10px;border:1px solid rgb(109 255 165 / 91%);font-size:13px;color:var(--ink);text-decoration:none !important}
.chip:hover{background:rgba(255,255,255,0.02);border-color:var(--accent);color:var(--accent)}
/* Author box used on article pages */
.author-box{ display: flex
;
    gap: 18px;
    align-items: center;
    background: linear-gradient(180deg, rgba(255, 255, 255, 0.02), rgba(255, 255, 255, 0.003));
    border: 1px solid rgba(253, 251, 251, 0.021);
    padding: 24px 24px;
    border-radius: 18px;
    margin-top: 60px;}
    /* margin: 0px -60px; */

.author-name{font-weight:700;color:var(--ink);margin-bottom:4px}
.author-role{font-size:13px;color:var(--muted);margin-bottom:8px}
.author-category{font-size:12px;color:var(--accent);letter-spacing:0.12em;text-transform:uppercase;margin-bottom:6px}
.author-lastUpdated{font-size:13px;color:var(--muted)}
/* Position the author box to the right of the hero image on desktop */
.hero-graphic{position:relative}
/* On wider screens use a two-column grid so the hero author box naturally
   occupies the same right-column width as the page TOC (320px). This keeps
   the horizontal alignment consistent across guide pages without touching
   markup. */
@media (min-width: 900px) {
  .hero-graphic{display:grid;grid-template-columns:1fr 320px;align-items:start;gap:0; margin-top: -70px;}
  .hero-graphic > img{grid-column:1;  width:100%;}
  .hero-author{position:static;grid-column:2;align-self:start;margin-left:0}
}
@media (max-width:1100px){ .hero-author{right:18px;top:18px} }
@media (max-width:900px){ .hero-author{position:static;margin-left:12px;margin-top:12px} }
@media (max-width:700px){ .author-box img, .author-avatar{ width:72px; height:72px; border-radius:10px } .author-lastUpdated{font-size:12px} }

/* small helpers */
.role-pill{display:inline-block;padding:6px 8px;border-radius:999px;background:rgba(255,255,255,0.02);border:1px solid var(--border);font-size:12px;color:var(--muted);margin-bottom:6px}
@media (max-width:700px){
  .hero h1{font-size:30px}
  .hero-inner{padding:18px}
  /* make the page container fit mobile width and avoid horizontal scroll */
  .wrap{max-width:100%;width:100%;margin:12px 0;padding:0 12px}
  .hero-graphic{justify-content:center}
  .hero-graphic img{width:80%;max-width:280px}
  article p{font-size:16px}
  .grid{gap:18px}
  /* ensure any wide child doesn't force horizontal scroll; allow tables to
    remain scrollable on small screens so columns don't wrap/break. */
  .grid, article, .definition, .related{overflow-x:hidden;}
  /* Allow horizontal scroll for wide tables inside the article */
  .table{width:100%;overflow:auto;-webkit-overflow-scrolling:touch}
  .table table{min-width:640px}
  /* Ensure chips (tag links) are visible and nicely wrapped on small screens */
  .chips{display:flex !important;flex-wrap:wrap;gap:8px;margin-left: 6px}
  .chip{padding:8px 10px;font-size:13px;margin-left:0;margin-right:8px}
}
/* Learn more scroller styles */    
.learn-more{max-width:1120px;margin:40px auto;padding:0 20px}
.learn-inner{position:relative}
.learn-inner h3{font-size:28px;margin:10px 0 18px;color: var(--ink) !important;}
.cards-viewport{overflow:hidden}
.cards-track{display:flex;gap:13px;overflow-x:auto;scroll-snap-type:x mandatory;padding-bottom:56px}
.cards-track::-webkit-scrollbar{height:8px}
.learn-card{flex:0 0 260px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.003));border:1px solid rgb(109 255 165 / 91%);border-radius:10px;padding:12px;scroll-snap-align:start}
.card-visual img{width:100%;height:120px;object-fit:cover;border-radius:8px}
.learn-card h4{margin:10px 0 6px;font-size:16px;color:var(--ink)}
.learn-card p{font-size:14px;color:var(--muted)}
.cards-nav{position:absolute;left:18px;bottom:-28px;display:flex;gap:12px;z-index:15}
.cards-prev,.cards-next{width:44px;height:44px;border:2px solid var(--accent);background:transparent;color:#57f298;cursor:pointer;display:grid;place-items:center;font-size:16px}
.cards-prev:hover,.cards-next:hover{background:rgba(110,231,183,0.06)}
.cards-prev:active,.cards-next:active{transform:translateY(1px)}
@media (max-width:700px){ .learn-inner h3{font-size:20px; text-align: center;} .learn-card{flex:0 0 220px} .cards-nav{display:none} }

/* Phone-sized tweaks: show one card per viewport, reduce image height and margins */
@media (max-width:480px){
  .cards-track{gap:12px;padding-bottom:28px}
  .cards-track{scroll-snap-type:x mandatory}
  .cards-viewport{overflow-x:auto}
  .learn-card{flex:0 0 86%;max-width:86%;margin:0 7%;box-sizing:border-box;padding:10px;border-radius:10px}
  .card-visual img{height:96px;object-fit:contain}
  .learn-card h4{font-size:15px;margin-top:8px}
  .learn-card p{font-size:13px}
  .cards-prev,.cards-next{display:none}
  /* Horizontal scroller cue: subtle green track + thumb at the bottom of the scroller
     The thumb position/width is controlled by CSS variables which the page JS will
     update as the user scrolls the cards viewport. Defaults are provided so the
     hint shows even when JS hasn't executed yet. */
  .cards-viewport{position:relative; --cards-thumb-left: 8%; --cards-thumb-width: 32%;}
  .cards-viewport::before{
    /* track */
    content:'';
    position:absolute;
    left:8%;
    right:8%;
    bottom:12px;
    height:6px;
    border-radius:999px;
    background:rgba(78,255,172,0.12);
    pointer-events:none;
    z-index:6;
  }
  .cards-viewport::after{
    /* thumb hint (static) - indicates there are more items horizontally */
    content:'';
    position:absolute;
    left: var(--cards-thumb-left, 8%);
    bottom:12px;
    height:6px;
    width: var(--cards-thumb-width, 32%);
    border-radius:999px;
    background:linear-gradient(90deg,#4EFFAC,#2CE561);
    pointer-events:none;
    z-index:7;
    box-shadow:0 2px 8px rgba(46,230,121,0.18);
    transition: left .12s linear, width .12s linear;
  }
}

/* Extra-tight mobile fixes for very narrow viewports (phones) to avoid cutting the H1,
   clipped author-box, and any horizontal overflow */
@media (max-width:420px){
  .hero-inner{padding:14px 12px}
  h2:after{margin-left: 150px;}
  .hero h1{font-size:22px;line-height:1.06;margin:6px 0 12px}
  .hero .meta{font-size:12px}
  .hero-graphic{display:flex;flex-direction:column;align-items:center;gap:12px;overflow:hidden;padding:0}
  .hero-graphic > img{width:70%;max-width:260px;height:auto;object-fit:contain}
  /* ensure the author box stacks beneath the hero image and doesn't overlap */
  .hero-author{position:static;margin:10px auto 0;right:auto;top:auto;max-width:320px}
  .author-box img, .author-avatar{ width:64px; height:64px; border-radius:10px }
  /* move share icons into the normal flow so they don't overlap hero content */
  .share{position:relative;margin-left:120px;display:flex;gap:8px;align-items:center}
  .share .share-icons a{width:32px;height:32px;font-size:12px}

  /* definition panel spacing */
  .definition{margin:14px 0;padding:12px 14px}

  /* ensure TOC is fully hidden and cannot be created/pinned into view */
  .toc{display:none!important}

  /* reduce learn-more card size to avoid forcing horizontal scroll */
  .cards-track{padding-bottom:36px}
  .learn-card{flex:0 0 260px}

  /* small visual guard: make sure no element can overflow viewport */
  html,body{overflow-x:hidden}
}

/* Broader phone breakpoint: ensure stacking for most modern phones (<=540px) */
@media (max-width:540px){
  .hero-inner{padding:16px 14px; text-align: center;}
  .hero h1{font-size:24px;line-height:1.08;margin:6px 0 14px}
  .hero-graphic{flex-direction:column !important;align-items:center !important;justify-content:center !important;gap:10px !important}
  .hero-graphic > img{width:64% !important;max-width:320px !important;height:auto !important}
  .hero-author{position:static !important;margin:8px auto 0 !important;right:auto !important;top:auto !important;max-width:100% !important;width:100% !important}
  .author-box img, .author-avatar{ width:72px !important; height:72px !important; border-radius:10px !important }
  .share{position:relative !important;margin-left:150 !important;display:flex !important;flex-wrap:wrap !important;gap:8px !important;align-items:center !important}
  .share .share-icons{order:3 !important;width:100% !important;display:flex !important;justify-content:flex-start !important; align-items: center;}

  /* push definition down so it never overlaps hero area */
  .definition{margin-top:18px}
  /* guarantee TOC hidden */
  .toc{display:none!important}
}
